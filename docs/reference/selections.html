<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Methods for Select Variables in Step Functions — selections • recipes</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Methods for Select Variables in Step Functions — selections" />

<meta property="og:description" content="When selecting variables or model terms in `step`
 functions, `dplyr`-like tools are used. The *selector* functions
 can choose variables based on their name, current role, data
 type, or any combination of these. The selectors are passed as
 any other argument to the step. If the variables are explicitly
 stated in the step function, this might be similar to:

  recipe( ~ ., data = USArrests) %&gt;%
    step_pca(Murder, Assault, UrbanPop, Rape, num = 3)
" />

<meta property="og:description" content="The first four arguments indicate which variables should be
 used in the PCA while the last argument is a specific argument
 to [step_pca()].
Note that:

The selector arguments should not contain functions
   beyond those supported (see below).
These arguments are not evaluated until the `prep`
   function for the step is executed.
The `dplyr`-like syntax allows for negative sings to
   exclude variables (e.g. `-Murder`) and the set of selectors will
   processed in order.
A leading exclusion in these arguments (e.g. `-Murder`)
  has the effect of adding all variables to the list except the
  excluded variable(s).
" />

<meta property="og:description" content="Also, select helpers from the `tidyselect` package can also be used:
  [tidyselect::starts_with()], [tidyselect::ends_with()],
  [tidyselect::contains()], [tidyselect::matches()],
  [tidyselect::num_range()], [tidyselect::everything()], and
  [tidyselect::one_of()].
  For example:

  recipe(Species ~ ., data = iris) %&gt;%
    step_center(starts_with("Sepal"), -contains("Width"))
" />

<meta property="og:description" content="would only select `Sepal.Length`
**Inline** functions that specify computations, such as
 `log(x)`, should not be used in selectors and will produce an
 error. A list of allowed selector functions is below.
Columns of the design matrix that may not exist when the step
 is coded can also be selected. For example, when using
 `step_pca`, the number of columns created by feature extraction
 may not be known when subsequent steps are defined. In this
 case, using `matches("^PC")` will select all of the columns
 whose names start with "PC" *once those columns are created*.
There are sets of functions that can be used to select
 variables based on their role or type: [has_role()] and
 [has_type()]. For convenience, there are also functions that are
 more specific: [all_numeric()], [all_nominal()],
 [all_predictors()], and [all_outcomes()]. These can be used in
 conjunction with the previous functions described for selecting
 variables using their names:

  data(biomass)
  recipe(HHV ~ ., data = biomass) %&gt;%
    step_center(all_numeric(), -all_outcomes())
" />

<meta property="og:description" content="This results in all the numeric predictors: carbon, hydrogen,
 oxygen, nitrogen, and sulfur.
If a role for a variable has not been defined, it will never be
 selected using role-specific selectors.
Selectors can be used in [step_interact()] in similar ways but
 must be embedded in a model formula (as opposed to a sequence
 of selectors). For example, the interaction specification
 could be `~ starts_with("Species"):Sepal.Width`. This can be
 useful if `Species` was converted to dummy variables
 previously using [step_dummy()].
The complete list of allowable functions in steps:

**By name**: [tidyselect::starts_with()],
      [tidyselect::ends_with()], [tidyselect::contains()],
      [tidyselect::matches()], [tidyselect::num_range()], and
      [tidyselect::everything()]
**By role**: [has_role()],
      [all_predictors()], and [all_outcomes()]
**By type**: [has_type()], [all_numeric()],
      and [all_nominal()]
" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">recipes</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/Simple_Example.html">Simple Example</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Selecting_Variables.html">Selecting Variables</a>
    </li>
    <li>
      <a href="../articles/Custom_Steps.html">Custom Steps</a>
    </li>
    <li>
      <a href="../articles/Ordering.html">The Order of Steps</a>
    </li>
    <li>
      <a href="../articles/Dummies.html">Dummy Variables and Interactions</a>
    </li>
    <li>
      <a href="../articles/Skipping.html">On Skipping Steps</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/topepo/recipes">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Methods for Select Variables in Step Functions</h1>
    <small class="dont-index">Source: <a href='https://github.com/topepo/recipes/blob/master/R/selections.R'><code>R/selections.R</code></a></small>
    <div class="hidden name"><code>selections.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>When selecting variables or model terms in `step`
 functions, `dplyr`-like tools are used. The *selector* functions
 can choose variables based on their name, current role, data
 type, or any combination of these. The selectors are passed as
 any other argument to the step. If the variables are explicitly
 stated in the step function, this might be similar to:</p>
<pre>
  recipe( ~ ., data = USArrests) %&gt;%
    step_pca(Murder, Assault, UrbanPop, Rape, num = 3)
</pre>

    <p>The first four arguments indicate which variables should be
 used in the PCA while the last argument is a specific argument
 to [step_pca()].</p>
<p>Note that:</p>
<p></p><ol>
<li><p>The selector arguments should not contain functions
   beyond those supported (see below).</p></li>
<li><p>These arguments are not evaluated until the `prep`
   function for the step is executed.</p></li>
<li><p>The `dplyr`-like syntax allows for negative sings to
   exclude variables (e.g. `-Murder`) and the set of selectors will
   processed in order.</p></li>
<li><p>A leading exclusion in these arguments (e.g. `-Murder`)
  has the effect of adding all variables to the list except the
  excluded variable(s).</p></li>
</ol>

    <p>Also, select helpers from the `tidyselect` package can also be used:
  [tidyselect::starts_with()], [tidyselect::ends_with()],
  [tidyselect::contains()], [tidyselect::matches()],
  [tidyselect::num_range()], [tidyselect::everything()], and
  [tidyselect::one_of()].
  For example:</p>
<pre>
  recipe(Species ~ ., data = iris) %&gt;%
    step_center(starts_with("Sepal"), -contains("Width"))
</pre>

    <p>would only select `Sepal.Length`</p>
<p>**Inline** functions that specify computations, such as
 `log(x)`, should not be used in selectors and will produce an
 error. A list of allowed selector functions is below.</p>
<p>Columns of the design matrix that may not exist when the step
 is coded can also be selected. For example, when using
 `step_pca`, the number of columns created by feature extraction
 may not be known when subsequent steps are defined. In this
 case, using `matches("^PC")` will select all of the columns
 whose names start with "PC" *once those columns are created*.</p>
<p>There are sets of functions that can be used to select
 variables based on their role or type: [has_role()] and
 [has_type()]. For convenience, there are also functions that are
 more specific: [all_numeric()], [all_nominal()],
 [all_predictors()], and [all_outcomes()]. These can be used in
 conjunction with the previous functions described for selecting
 variables using their names:</p>
<pre>
  data(biomass)
  recipe(HHV ~ ., data = biomass) %&gt;%
    step_center(all_numeric(), -all_outcomes())
</pre>

    <p>This results in all the numeric predictors: carbon, hydrogen,
 oxygen, nitrogen, and sulfur.</p>
<p>If a role for a variable has not been defined, it will never be
 selected using role-specific selectors.</p>
<p>Selectors can be used in [step_interact()] in similar ways but
 must be embedded in a model formula (as opposed to a sequence
 of selectors). For example, the interaction specification
 could be `~ starts_with("Species"):Sepal.Width`. This can be
 useful if `Species` was converted to dummy variables
 previously using [step_dummy()].</p>
<p>The complete list of allowable functions in steps:</p>
<p></p><ul>
<li><p>**By name**: [tidyselect::starts_with()],
      [tidyselect::ends_with()], [tidyselect::contains()],
      [tidyselect::matches()], [tidyselect::num_range()], and
      [tidyselect::everything()]</p></li>
<li><p>**By role**: [has_role()],
      [all_predictors()], and [all_outcomes()]</p></li>
<li><p>**By type**: [has_type()], [all_numeric()],
      and [all_nominal()]</p></li>
</ul>
    
    </div>

        

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
                </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Max Kuhn, <a href='http://hadley.nz'>Hadley Wickham</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

